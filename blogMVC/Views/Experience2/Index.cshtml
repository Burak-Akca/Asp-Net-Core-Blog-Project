@using EntityLayer.Concrete
@model List<Experience>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_NewAdminLayout.cshtml";
}

<button id="getlistall" class="btn btn-danger">Getir</button>
<br />
<button id="add" class="btn btn-primary">Kaydet</button>
<br />
<button id="id" class="btn btn-primary">Id ile getir</button>
<br />
<button id="delete" class="btn btn-primary">Sil</button>

    



<br />
<div class="p-2" id="listexperience">



</div>

<br />

<div class="p-2" id="listbyidexperience">


</div>

<br />

<div class="p-2">

    <h5> Silme Paneli</h5>
    <input type="text" class="form-control" id="inpexid" placeholder="ID giriniz" />


</div>

<br />
<div class="col-md-12">
    <h4>Ekleme Paneli</h4>
    <input type="text" class="form-control" id="inpname" placeholder="Deneyim" />
    <br />
    <input type="text" class="form-control" id="inpdate" placeholder="Tarih " />
    <br />
    <input type="text" class="form-control" id="inpimageurl" placeholder="Resim Yolu" />
    <br />
    <input type="text" class="form-control" id="inpdescription" placeholder="Açıklama" />
    <br />


</div>

<div class="col-md-12">
    <h4>Id`ye göre getirme Paneli</h4>
    <input type="text" class="form-control" id="inpid" placeholder="ID giriniz" />

    <br />


</div>
@section Scripts
    {
    <script>
        $("#getlistall").click(function () {

            $.ajax({
                contentType: "application/json",
                dataType: "json",
                type: "Get",
                url: "/Experience2/ListExperience/",
                success: function (funk) {
                    let values = jQuery.parseJSON(funk)
                    console.log(values)

                    let htmlst = "<table class=table table-bordered> <tr> <th> Id </th> <th> Başlık </th> <th>  Tarih </th></tr> ";
                    $.each(values,(index,value)=>{
                        htmlst += `<tr> <td>${value.ExperienceID}</td> <td>${value.Name}</td> <td>${value.Date}</td></tr>`;
                    });
                    htmlst += "</table>";
                    $("#listexperience").html(htmlst);

                }

            });
        });
        $("#add").click(function (){
            let values={
                Name:$("#inpname").val(),
                Date: $("#inpdate").val(),
                ImageUrl: $("#inpimageurl").val(),

                Description: $("#inpdescription").val()
            };
            $.ajax({
                
                type: "Post",
                url: "/Experience2/AddExperience/",
                data:values,
                success:function(funk1){
                        let result=jQuery.parseJSON(funk1);
                        console.log(result);
                        alert(result.Name+" Başarılı bir şekilde eklendi")
                }
            });

        });
        $("#id").click(function(){
            let id=$("#inpid").val();
            $.ajax({
                contentType: "application/json",
                dataType: "json",
                type: "Get",
                url: "/Experience2/GetById/",
                data:{ExperienceID:id} ,           
                success:function(funk2){
                    let values = jQuery.parseJSON(funk2)
                    console.log(values)
                    let htmlstr = `<table class=table table-hover> <tr> <th> DeneyimId </th> <td> ${values.ExperienceID} </td>  </tr> <tr><th>  Deneyim Başlığı </th><td> ${values.Name} </td></tr> </ table>`
                    $("#listbyidexperience").html(htmlstr)   
                }
            
            });


        });
        $("#delete").click(function(){
            let id=$("#inpexid").val();
            $.ajax({
                url:"/Experience2/DeleteExperience/"+id,
                contentType: "application/json",
                dataType: "json",
                type: "Post",
                success: function (funk3){
                    console.log("Silme işlemi Başarılı")

                }


            });



        });

    </script>
}
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery/dist/jquery.js"></script>